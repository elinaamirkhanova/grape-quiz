<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Which Wine Grape Are You? üçá</title>
  <meta name="description" content="8‚Äëquestion wine personality quiz ‚Äî discover your grape with structured WSET‚Äëstyle results and pairings."/>
  <meta property="og:title" content="Which Wine Grape Are You?"/>
  <meta property="og:description" content="Take the 8‚Äëquestion quiz and get your grape result with WSET‚Äëstyle notes and pairings."/>
  <meta property="og:type" content="website"/>
  <meta name="theme-color" content="#8b5cf6"/>
  <style>
    :root{--bg:#0f0f12;--card:#17171c;--ink:#f4f4f6;--muted:#a9a9b3;--accent:#8b5cf6;--accent-2:#f59e0b;--ok:#22c55e}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";background:radial-gradient(1200px 800px at 20% 0%,#1a1a22,#0c0c0f 60%),url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32"><circle cx="8" cy="8" r="1" fill="%23272733"/></svg>');color:var(--ink);-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}
    .wrap{max-width:980px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;gap:16px;flex-wrap:wrap;justify-content:space-between;margin-bottom:18px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:40px;height:40px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),#e879f9);box-shadow:0 10px 30px rgba(139,92,246,.35)}
    h1{margin:0;font-size:clamp(22px,3.6vw,36px)}
    .muted{color:var(--muted)}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);box-shadow:0 12px 40px rgba(0,0,0,.45);border-radius:18px;padding:22px;margin:14px 0}
    .pill{display:inline-flex;gap:8px;align-items:center;padding:6px 12px;border-radius:999px;background:rgba(139,92,246,.12);color:#d6b9ff;font-weight:600;font-size:12px;text-transform:uppercase;letter-spacing:.8px}
    .grid{display:grid;gap:16px}
    @media (min-width:800px){.grid{grid-template-columns:1.05fr .95fr}}
    .q{margin:8px 0 6px;font-weight:700}
    .options{display:grid;gap:10px;margin:10px 0 6px}
    .opt{position:relative;display:flex;align-items:center;gap:12px;padding:14px;border-radius:14px;cursor:pointer;background:#141418;border:1px solid rgba(255,255,255,.08)}
    .opt:hover{border-color:rgba(255,255,255,.18);background:#16161c}
    .opt input{appearance:none;width:18px;height:18px;border-radius:50%;border:2px solid #aaa;display:grid;place-items:center}
    .opt input:checked{border-color:var(--accent)}
    .dot{width:8px;height:8px;border-radius:50%;background:transparent}
    .opt input:checked + .dot{background:var(--accent)}
    .actions{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:8px}
    button{appearance:none;border:0;background:linear-gradient(135deg,var(--accent),#e879f9);color:white;padding:12px 16px;border-radius:14px;cursor:pointer;font-weight:800;letter-spacing:.3px;box-shadow:0 10px 30px rgba(139,92,246,.35)}
    button.secondary{background:#23232a;color:#e9e9ee;box-shadow:none;border:1px solid rgba(255,255,255,.08)}
    .toast{font-size:13px}
    .result{display:none}
    .result.show{display:block}
    .result .title{font-size:28px;font-weight:900;margin:0 0 6px}
    .badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:#15151a}
    .pair{margin-top:10px;padding:12px;border-radius:14px;background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.25)}
    footer{margin:28px 0 10px;text-align:center;color:var(--muted);font-size:12px}
    .progress{height:6px;background:#1c1c23;border-radius:8px;overflow:hidden;margin:6px 0 14px;border:1px solid rgba(255,255,255,.06)}
    .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));transition:width .4s ease}
    .note{font-size:12px;color:var(--muted)}
    .kgrid{display:grid;gap:10px}
    @media(min-width:700px){.kgrid{grid-template-columns:1fr 1fr}}
    .kv{background:#121217;border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:10px}
    .kv h4{margin:0 0 6px;font-size:12px;letter-spacing:.6px;text-transform:uppercase;color:#c9c9d3}
    ul{margin:6px 0 0 16px}
    li{margin:2px 0}
    .sharegrid{display:grid;gap:12px}
    @media(min-width:700px){.sharegrid{grid-template-columns:1fr auto}}
    .input{display:flex;gap:8px;align-items:center}
    input.url{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.12);background:#111118;color:#eaeaf0}
    .qr{width:180px;height:180px;border-radius:12px;background:#111118;border:1px solid rgba(255,255,255,.08);display:grid;place-items:center}
    .small{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">üç∑</div>
        <div>
          <h1>Which Wine Grape Are You?</h1>
          <div class="muted">8 quick questions ‚Ä¢ clean 4‚Äëoption layout ‚Ä¢ instant result</div>
        </div>
      </div>
      <div class="pill">Free ‚Ä¢ Mobile‚Äëfriendly</div>
    </header>

    <div class="grid">
      <section class="card">
        <div class="progress" aria-hidden="true"><div class="bar" id="progressBar"></div></div>
        <form id="quiz" novalidate></form>
        <div class="actions">
          <button id="submitBtn" type="button">Reveal my grape</button>
          <button id="resetBtn" type="button" class="secondary">Reset</button>
          <span class="toast muted" id="toast"></span>
        </div>
        <p class="note">No sign‚Äëups, no tracking ‚Äî just vibes and viniferous curiosity.</p>
      </section>

      <aside class="card result" id="resultCard" aria-live="polite">
        <div class="badge">üçá Your result</div>
        <h2 class="title" id="resTitle">&nbsp;</h2>
        <p id="resBlurb" class="muted" style="margin-top:-2px"></p>
        <div class="kgrid" style="margin-top:8px">
          <div class="kv"><h4>Style</h4><div id="resStyle"></div></div>
          <div class="kv"><h4>Structure</h4><div id="resStruct"></div></div>
          <div class="kv"><h4>Aromas</h4><ul id="resAromas"></ul></div>
          <div class="kv"><h4>Classic regions</h4><ul id="resRegions"></ul></div>
          <div class="kv"><h4>Learn</h4><ul id="resLearn"></ul></div>
          <div class="kv"><h4>Serve</h4><div id="resServe"></div></div>
          <div class="kv"><h4>Food pairings</h4><div id="resPair"></div></div>
        </div>
        <div class="actions" style="margin-top:10px">
          <button id="retakeBtn" type="button" class="secondary">Retake</button>
        </div>
      </aside>
    </div>

    <section class="card">
      <div class="badge">üîó Share this quiz</div>
      <div class="sharegrid">
        <div>
          <div class="input">
            <input id="shareUrl" class="url" readonly aria-label="Shareable quiz link"/>
            <button id="copyBtn" type="button" class="secondary">Copy link</button>
            <button id="nativeShare" type="button">Share</button>
          </div>
          <div id="copyToast" class="small" style="margin-top:6px"></div>
        </div>
        <div class="qr" aria-label="QR code for this quiz"><img id="qrImg" alt="QR to this quiz" width="180" height="180"/></div>
      </div>
    </section>

    <footer>Built for training sessions ‚Äî project the QR and let everyone play. Cheers! üç∑</footer>
  </div>

  <script>
    // --- Config: Results (WSET‚Äëstyle, fun emojis) ---
    const GRAPES = {
      chardonnay: {
        name: "Chardonnay", emoji: "ü•Ç",
        blurb: "Personality: shapeshifter chic ‚Äî elegant under pressure, comfy when it counts. You‚Äôre the friend who can do black‚Äëtie or beach day without breaking a sweat.",
        style: "Dry (unoaked to richly oaked)",
        structure: { acidity: "Medium to Medium+", tannin: "‚Äî", body: "Medium to Full", alcohol: "Medium to High", sweetness: "Dry" },
        aromas: ["green apple", "lemon", "peach", "butter/vanilla (oak/MLF)", "hazelnut"],
        regions: ["Burgundy (Chablis, C√¥te de Beaune)", "California (Sonoma/Napa)", "Australia (Margaret River)", "South Africa"],
        serve: "10‚Äì13¬∞C ‚Ä¢ white wine glass",
        pairings: "Roast chicken, buttery seafood, creamy pasta",
        learn: [
          "Malolactic conversion (MLF) softens acidity and adds buttery notes.",
          "Oak adds vanilla/toast; stainless steel preserves crisp apple‚Äëcitrus."
        ]
      },
      sauvblanc: {
        name: "Sauvignon Blanc", emoji: "ü™Å",
        blurb: "Personality: zesty trailblazer ‚Äî bright ideas, fast feet, and picnic‚Äëenergy. You refresh the room the way citrus refreshes a palate.",
        style: "Dry (rarely oaked)",
        structure: { acidity: "High", tannin: "‚Äî", body: "Light to Medium", alcohol: "Medium", sweetness: "Dry" },
        aromas: ["lime/gooseberry", "green bell pepper", "passion fruit", "nettles", "wet stone"],
        regions: ["Loire (Sancerre/Pouilly‚ÄëFum√©)", "New Zealand (Marlborough)", "Chile (Casablanca)", "South Africa"],
        serve: "8‚Äì10¬∞C ‚Ä¢ white wine glass",
        pairings: "Goat cheese, salads, herb‚Äëled seafood",
        learn: [
          "Pyrazines drive the green capsicum note; thiols bring passionfruit/tropical.",
          "Cool climates sharpen acidity; warmer sites tilt toward tropical fruit."
        ]
      },
      pinotgrigio: {
        name: "Pinot Grigio", emoji: "üå§Ô∏è",
        blurb: "Personality: sunny and unfussy ‚Äî you keep plans light and the vibe friendly. Hydration, but make it stylish.",
        style: "Dry (light‚Äëbodied)",
        structure: { acidity: "Medium to Medium+", tannin: "‚Äî", body: "Light", alcohol: "Medium", sweetness: "Dry" },
        aromas: ["lemon", "pear", "white flowers", "almond"],
        regions: ["Italy (Veneto, Friuli, Alto Adige)", "USA (Oregon)", "Germany/Alsace (as Grauburgunder/Pinot Gris)"],
        serve: "8‚Äì10¬∞C ‚Ä¢ white wine glass",
        pairings: "Light salads, antipasti, margarita pizza",
        learn: [
          "‚ÄòPinot Gris‚Äô in Alsace is often fuller and spicier than Italian styles.",
          "‚ÄòRamato‚Äô is a skin‚Äëcontact style that gives a copper tint."
        ]
      },
      riesling: {
        name: "Riesling", emoji: "üé∂",
        blurb: "Personality: precision with personality ‚Äî you hit high notes without losing the melody. Playful, but exacting.",
        style: "Dry to Medium‚Äësweet (varies by region)",
        structure: { acidity: "High", tannin: "‚Äî", body: "Light", alcohol: "Low to Medium", sweetness: "Dry to Medium‚Äësweet" },
        aromas: ["lime", "green apple", "white peach", "jasmine", "petrol (with age)"],
        regions: ["Germany (Mosel, Rheingau)", "Alsace", "Australia (Clare/Eden)", "Austria"],
        serve: "7‚Äì10¬∞C ‚Ä¢ white wine glass",
        pairings: "Spicy Asian dishes, pork, fragrant curries",
        learn: [
          "High acidity balances residual sugar ‚Äî sweet doesn‚Äôt mean cloying.",
          "TDN compound can give that ‚Äòpetrol‚Äô note with bottle age."
        ]
      },
      cabernet: {
        name: "Cabernet Sauvignon", emoji: "ü¶Å",
        blurb: "Personality: the executive ‚Äî decisive, structured, and a touch dramatic. When you enter, the tannins stand up straight.",
        style: "Dry (often oaked)",
        structure: { acidity: "Medium+", tannin: "High", body: "Full", alcohol: "Medium to High", sweetness: "Dry" },
        aromas: ["blackcurrant", "black cherry", "cedar", "tobacco", "graphite"],
        regions: ["Bordeaux (Left Bank)", "Napa Valley", "Coonawarra", "Chile (Maipo)"] ,
        serve: "16‚Äì18¬∞C ‚Ä¢ large red glass",
        pairings: "Steak, lamb, aged hard cheeses",
        learn: [
          "Thick skins ‚Üí deep color and high tannin; oak adds cedar/spice.",
          "Often blended with Merlot/Cab Franc in Bordeaux for balance."
        ]
      },
      merlot: {
        name: "Merlot", emoji: "ü´∂",
        blurb: "Personality: velvet mode ‚Äî you‚Äôre the soft landing and the reliable hug, with enough depth to keep it interesting.",
        style: "Dry (often oaked)",
        structure: { acidity: "Medium", tannin: "Medium", body: "Medium to Full", alcohol: "Medium", sweetness: "Dry" },
        aromas: ["plum", "redcurrant", "chocolate", "baking spice"],
        regions: ["Bordeaux (Right Bank)", "USA (Washington/California)", "Chile"],
        serve: "15‚Äì18¬∞C ‚Ä¢ red glass",
        pairings: "Burgers, meatballs, tomato‚Äëbased pasta",
        learn: [
          "Earlier‚Äëripening than Cabernet; tends toward softer tannins.",
          "Oak aging can layer mocha/chocolate notes onto plum fruit."
        ]
      },
      pinotnoir: {
        name: "Pinot Noir", emoji: "ü¶ä",
        blurb: "Personality: silk and nuance ‚Äî observant, expressive, a little mysterious. You prefer conversation to shouting.",
        style: "Dry (light to medium body)",
        structure: { acidity: "Medium+", tannin: "Low to Medium", body: "Light to Medium", alcohol: "Medium", sweetness: "Dry" },
        aromas: ["strawberry", "cherry", "cranberry", "mushroom", "forest floor"],
        regions: ["Burgundy", "Oregon", "New Zealand (Central Otago)", "Tasmania"],
        serve: "14‚Äì16¬∞C ‚Ä¢ Burgundy glass (light chill)",
        pairings: "Duck, mushrooms, salmon, roast chicken",
        learn: [
          "Thin‚Äëskinned ‚Üí paler color, gentle tannins, very site‚Äëexpressive.",
          "Cooler sites favor red fruit/earth; warmer sites push riper cherry."
        ]
      },
      syrah: {
        name: "Syrah / Shiraz", emoji: "üî•",
        blurb: "Personality: pepper and power ‚Äî you bring the bassline and the pyrotechnics. Crowd‚Äëpleaser with edge.",
        style: "Dry (often oaked)",
        structure: { acidity: "Medium to Medium+", tannin: "Medium+ to High", body: "Full", alcohol: "Medium to High", sweetness: "Dry" },
        aromas: ["blackberry", "blueberry", "black pepper", "olive", "smoke/meat"],
        regions: ["Northern Rh√¥ne (Hermitage, C√¥te‚ÄëR√¥tie)", "Barossa/McLaren Vale", "Washington"],
        serve: "16‚Äì18¬∞C ‚Ä¢ large red glass",
        pairings: "BBQ, grilled meats, cocoa‚Äërubbed dishes",
        learn: [
          "Rotundone compound gives black pepper ‚Äî pronounced in cooler sites.",
          "Warmer climates push riper, jammy fruit and higher alcohol."
        ]
      }
    };

    // --- Questions (8) ‚Äî clean 4‚Äëoption layout ---
    // Each option gives one point to a grape key in GRAPES
    const QUESTIONS = [
      {
        q: "It‚Äôs Friday night ‚Äî what‚Äôs your plan?",
        options: [
          { t: "Elegant dinner party", g: "chardonnay" },
          { t: "Late‚Äënight dancing", g: "syrah" },
          { t: "Cozy comfort‚Äëfood night", g: "merlot" },
          { t: "Art‚Äëhouse cinema", g: "pinotnoir" }
        ]
      },
      {
        q: "Pick a vacation vibe.",
        options: [
          { t: "Burgundy ch√¢teaux", g: "chardonnay" },
          { t: "Marlborough coast", g: "sauvblanc" },
          { t: "Amalfi scooters & sun", g: "pinotgrigio" },
          { t: "Mosel river villages", g: "riesling" }
        ]
      },
      {
        q: "Choose a snack.",
        options: [
          { t: "Goat cheese salad", g: "sauvblanc" },
          { t: "Crisps & olives", g: "pinotgrigio" },
          { t: "Fruit gummies", g: "riesling" },
          { t: "Steak bites", g: "cabernet" }
        ]
      },
      {
        q: "Which word fits you best?",
        options: [
          { t: "Versatile", g: "chardonnay" },
          { t: "Energetic", g: "sauvblanc" },
          { t: "Warm", g: "merlot" },
          { t: "Bold", g: "syrah" }
        ]
      },
      {
        q: "Pick a color vibe.",
        options: [
          { t: "Deep red", g: "cabernet" },
          { t: "Plum", g: "merlot" },
          { t: "Ruby", g: "pinotnoir" },
          { t: "Sky blue", g: "riesling" }
        ]
      },
      {
        q: "Friends call you‚Ä¶",
        options: [
          { t: "The stylish one", g: "chardonnay" },
          { t: "The zesty one", g: "sauvblanc" },
          { t: "The chill one", g: "pinotgrigio" },
          { t: "The daring one", g: "syrah" }
        ]
      },
      {
        q: "Pick a texture you‚Äôre craving.",
        options: [
          { t: "Crisp & zesty", g: "sauvblanc" },
          { t: "Silky & subtle", g: "pinotnoir" },
          { t: "Plush & cozy", g: "merlot" },
          { t: "Bold & spicy", g: "syrah" }
        ]
      },
      {
        q: "When wine‚Äôs not available, you order‚Ä¶",
        options: [
          { t: "Old fashioned", g: "cabernet" },
          { t: "Aperol spritz", g: "pinotgrigio" },
          { t: "Negroni", g: "pinotnoir" },
          { t: "Spicy margarita", g: "syrah" }
        ]
      }
    ];

    // --- Render quiz ---
    const form = document.getElementById('quiz');
    const progressBar = document.getElementById('progressBar');
    const toast = document.getElementById('toast');

    function render(){
      form.innerHTML = '';
      QUESTIONS.forEach((q, i) => {
        const block = document.createElement('div');
        block.className = 'qblock';
        const qEl = document.createElement('div');
        qEl.className = 'q';
        qEl.textContent = (i+1) + '. ' + q.q;
        block.appendChild(qEl);
        const opts = document.createElement('div');
        opts.className = 'options';
        q.options.forEach((opt, j) => {
          const id = `q${i}_opt${j}`;
          const label = document.createElement('label');
          label.className = 'opt';
          label.setAttribute('for', id);
          label.innerHTML = `
            <input type="radio" name="q${i}" id="${id}" value="${opt.g}">
            <span class="dot" aria-hidden="true"></span>
            <span>${opt.t}</span>
          `;
          opts.appendChild(label);
        });
        block.appendChild(opts);
        form.appendChild(block);
      });
    }
    render();

    function updateProgress(){
      const total = QUESTIONS.length;
      const answered = [...form.querySelectorAll('input[type="radio"]:checked')]
        .reduce((acc, r) => acc.add(r.name), new Set()).size;
      const pct = Math.round((answered/total)*100);
      progressBar.style.width = pct + '%';
    }
    form.addEventListener('change', updateProgress);

    // --- Scoring ---
    function scoreQuiz(){
      const chosen = [...form.querySelectorAll('input[type="radio"]:checked')].map(r => r.value);
      if(chosen.length !== QUESTIONS.length){
        throw new Error(`Please answer all ${QUESTIONS.length} questions.`);
      }
      const tally = {};
      chosen.forEach(g => tally[g] = (tally[g]||0) + 1);
      const entries = Object.entries(tally).sort((a,b)=> b[1]-a[1]);
      const topScore = entries[0][1];
      const winners = entries.filter(e => e[1]===topScore).map(e=>e[0]);
      // Tie‚Äëbreak by the order grapes are defined
      const order = Object.keys(GRAPES);
      const winner = winners.sort((a,b)=> order.indexOf(a)-order.indexOf(b))[0];
      return {winner, tally};
    }

    // --- Show result ---
    const resultCard = document.getElementById('resultCard');
    const resTitle = document.getElementById('resTitle');
    const resBlurb = document.getElementById('resBlurb');
    const resStyle = document.getElementById('resStyle');
    const resStruct = document.getElementById('resStruct');
    const resAromas = document.getElementById('resAromas');
    const resRegions = document.getElementById('resRegions');
    const resLearn = document.getElementById('resLearn');
    const resServe = document.getElementById('resServe');
    const resPair = document.getElementById('resPair');

    function bulletList(listEl, items){
      listEl.innerHTML = '';
      items.forEach(t => { const li = document.createElement('li'); li.textContent = t; listEl.appendChild(li); });
    }

    function showResult(key){
      const g = GRAPES[key];
      resTitle.textContent = `${g.emoji} You‚Äôre ${g.name}!`;
      resBlurb.textContent = g.blurb;
      resStyle.textContent = g.style;
      resStruct.innerHTML = `Acidity: <b>${g.structure.acidity}</b><br>Tannin: <b>${g.structure.tannin}</b><br>Body: <b>${g.structure.body}</b><br>Alcohol: <b>${g.structure.alcohol}</b><br>Sweetness: <b>${g.structure.sweetness}</b>`;
      bulletList(resAromas, g.aromas);
      bulletList(resRegions, g.regions);
      bulletList(resLearn, g.learn || []);
      resServe.textContent = g.serve;
      resPair.textContent = g.pairings;
      resultCard.classList.add('show');
      resultCard.scrollIntoView({behavior:'smooth', block:'start'});
    }

    // --- Controls ---
    const submitBtn = document.getElementById('submitBtn');
    const resetBtn = document.getElementById('resetBtn');
    const retakeBtn = document.getElementById('retakeBtn');

    function resetQuiz(){
      form.reset();
      updateProgress();
      document.getElementById('toast').textContent = '';
      resultCard.classList.remove('show');
    }

    submitBtn.addEventListener('click', ()=>{
      try{
        const {winner} = scoreQuiz();
        showResult(winner);
      }catch(err){ document.getElementById('toast').textContent = err.message; }
    });
    resetBtn.addEventListener('click', resetQuiz);
    retakeBtn.addEventListener('click', resetQuiz);

    // Initialize progress
    updateProgress();

    // --- Share helpers ---
    const shareUrl = window.location.href;
    const urlInput = document.getElementById('shareUrl');
    if(urlInput){ urlInput.value = shareUrl; }
    const qrImg = document.getElementById('qrImg');
    if(qrImg){ qrImg.src = 'https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=' + encodeURIComponent(shareUrl); }
    const copyBtn = document.getElementById('copyBtn');
    const nativeShare = document.getElementById('nativeShare');
    const copyToast = document.getElementById('copyToast');
    copyBtn?.addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(shareUrl); copyToast.textContent='Link copied!'; setTimeout(()=>copyToast.textContent='',1500);}catch(e){ copyToast.textContent='Copy failed'; }
    });
    nativeShare?.addEventListener('click', async ()=>{
      if(navigator.share){ try{ await navigator.share({title: document.title, url: shareUrl}); }catch(_){} } else { copyToast.textContent='Sharing not supported on this device'; setTimeout(()=>copyToast.textContent='',1500); }
    });
  </script>
</body>
</html>
